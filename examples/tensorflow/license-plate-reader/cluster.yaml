# cluster.yaml

# EKS cluster name for cortex (default: cortex)
cluster_name: cortex-0

# AWS region
region: eu-central-1

# S3 bucket 
bucket: cortex-0

# instance type
instance_type: t2.large

# minimum number of instances (must be >= 0)
min_instances: 1

# maximum number of instances (must be >= 1)
max_instances: 5

# instance volume size (GB) (default: 50)
instance_volume_size: 50

# CloudWatch log group for cortex (default: <cluster_name>)
log_group: cortex

# whether to use spot instances in the cluster (default: false)
# see https://cortex.dev/v/master/cluster-management/spot-instances for additional details on spot configuration
spot: true

spot_config:
    # additional instances with identical or better specs than the primary instance type (defaults to 2 instances sorted by price)
    instance_distribution: [t3a.large, m5.large]
  
    # minimum number of on demand instances (default: 0)
    on_demand_base_capacity: 0
  
    # percentage of on demand instances to use after the on demand base capacity has been met [0, 100] (default: 50)
    # note: setting this to 0 may hinder cluster scale up when spot instances are not available
    on_demand_percentage_above_base_capacity: 10
  
    # number of spot instance pools across which to allocate spot instances [1, 20] (default: number of instances in instance distribution)
    instance_pools: 3
  
    # fallback to on-demand instances if spot instances were unable to be allocated (default: true)
    on_demand_backup: true